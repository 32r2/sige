@using SIGES.Models;
<link href="~/Content/Switch_Button.css" rel="stylesheet" />
@{
    ViewBag.Title = "ReportesTienda";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Reportes por Tienda</h2>
<div id="Alertas"></div>
<div class="accordion" id="AcordeonArea">
    @{
        if (Departamentos.IDArea != null)
        {
            string Classe = "card m-b-0";
            for (var i = 0; i < Departamentos.IDArea.Count(); i++)
            {
                if (i > 0)
                {
                    Classe = "card m-b-0 border-top";
                }
                string Collapse = "collapse" + @Departamentos.IDArea[i];
                string IDTabla = "Tabla_Depto_" + @Departamentos.IDArea[i];
                string Heading = "heading" + @Departamentos.IDArea[i]; 
                string Badge = "Badge" + @Departamentos.IDArea[i];
                <div class="@Classe">
                    <div class="card-header" id="@Heading">
                        <h5 class="mb-0">
                            <a data-toggle="collapse" data-target="#@Collapse" aria-expanded="false" aria-controls="Collapse" class="collapsed">
                                <i class="m-r-5 fas fa-clipboard-list" aria-hidden="true"></i>
                                <span>@Departamentos.Nombre[i] </span><span id="@Badge" class="badge badge-danger"></span>
                            </a>
                        </h5>
                        <div id="@Collapse" class="collapse" aria-labelledby="headingOne" data-parent="#AcordeonArea" style="">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12"><strong>Jefe de área: </strong>@Departamentos.UNombre[i]</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-sm-6 col-xs-6"><strong>Correo: </strong>@Departamentos.Correo[i]</div>
                                    <div class="col-md-6 col-sm-6 col-xs-6"><strong>Teléfono: </strong>@Departamentos.Telefono[i]</div>
                                </div>
                                <div class="row"><div class="col-md-6 col-sm-6 col-xs-6"><br> </div></div>
                                <div class="row">
                                    <div id="@IDTabla" class="col-md-12 col-sm-12 col-xs-12">Espacio para las Incidencias por área</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    }
</div>
<img id="imageid" src="~/Assets/Internal/404Imagen.png" style="display: none" />
<div id="ModalFinIncidencia" class="modal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Reporte de incidencia</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-7 col-sm-12 col-xs-12">
                            <span class="help-block text-muted small-font">ID Reporte de incidencia</span>
                            <input type="number" id="TxtIDRInsidencia" class="form-control limpiar" placeholder="###" disabled="disabled" />
                        </div>
                        <div class="col-md-5 col-sm-12 col-xs-12">
                            <span class="help-block text-muted small-font">Fecha</span>
                            <input type="text" id="TxtFecha" class="form-control limpiar" placeholder="##/##/####" disabled="disabled" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8 col-sm-8 col-xs-8">
                            <span class="help-block text-muted small-font">Incidencia</span>
                            <br />
                            <select id="cmbIDInsidencia" style="width: 100%" class="btn btn-danger dropdown-toggle SelectCLS" disabled="disabled"></select>
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-4">
                            <span class="help-block text-muted small-font">No. Incidencia Tienda</span>
                            <input type="number" id="TxtNoInsidencia" class="form-control limpiar" placeholder="###" disabled="disabled" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8 col-sm-8 col-xs-8">
                            <span class="help-block text-muted small-font">Reporto incidencia:</span>
                            <br />
                            <input type="text" id="TxtNombreUsuario" class="form-control limpiar" placeholder="Nombre usuario" disabled="disabled" />
                        </div>
                        <div class="col-md-4 col-sm-4 col-xs-4">
                            <span class="help-block text-muted small-font">Plus</span>
                            <br />
                            <select id="cmbIDTienda" style="width: 100%" class="btn btn-primary dropdown-toggle limpiar" disabled="disabled">
                                <option value="0">--Seleccione--</option>
                                @{
                                    if (Sucursales.IDTienda != null)
                                    {
                                        for (int t = 0; t < Sucursales.IDTienda.Count(); t++)
                                        {
                                            <option value="@Sucursales.IDTienda[t]">@Sucursales.Nombre[t]</option>
                                        }
                                    }
                                }
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <span class="help-block text-muted small-font">Usuario</span>
                            <br />
                            <select id="cmbIDUsuario" style="width: 100%" class="btn btn-primary dropdown-toggle limpiar" disabled="disabled"></select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 align-items-center">
                            <span class="help-block text-muted small-font">Foto</span>
                            <br />
                            <img id="PBFoto" src="" width="250" height="150" alt="" />
                            <br />
                            <input id="BtnFoto" type="file" class="form-control form-control-sm limpiar" value="SUBIR" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <span class="help-block text-muted small-font">Observaciones</span>
                            <br />
                            <textarea type="text" id="TxtObservaciones" class="form-control limpiar obligatorio" rows="3" wrap="soft" placeholder="Inserte una breve descripción de la incidencia."></textarea>
                        </div>
                    </div>
                    <br />
                    <div class="modal-footer">
                        <button id="btnGuardar" type="button" class="btn btn-success" onclick="FinalizarReporte()">GUARDAR</button>
                        <button id="btnCancelar" type="button" class="btn btn-danger" onclick="location.reload()" data-dismiss="modal">CANCELAR</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/Scripts/jquery.min.js"></script>
<script src="~/Scripts/Own/JS_System_Reportes_Incidencias.js"></script>